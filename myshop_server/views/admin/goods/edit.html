<!DOCTYPE html>
<html>

<head>
    <meta charset="UTF-8">
    <title></title>
    <meta name="viewport"
        content="width=device-width, initial-scale=1.0,maximum-scale=1.0,minimum-scale=1.0,user-scalable=no">
    <!--The content below is only a placeholder and can be replaced.-->

    <link rel="stylesheet" href="/css/bootstrap.css">

    <link rel="stylesheet" href="/css/basic.css">

    <script type="text/javascript" src="/js/jquery-1.12.4.min.js"></script>

    <script type="text/javascript" src="/js/base.js"></script>

    <script type="text/javascript" charset="utf-8" src="/ueditor/ueditor.config.js"></script>
    <script type="text/javascript" charset="utf-8" src="/ueditor/ueditor.all.min.js"> </script>
    <script type="text/javascript" charset="utf-8" src="/ueditor/lang/zh-cn/zh-cn.js"></script>
    <style>
        .goods_image_list li {
            position: relative;
            width: 100px;
            height: 80px;
        }

        .goods_image_delete {
            position: absolute;
            right: 0;
            top: 0;
            color: red;
            cursor: pointer;
        }
    </style>
</head>

<body>

    <%- include('../public/header.html') %>

    <div class="container-fluid">
        <div class="row">
            <div class="col-sm-2 col-md-2">
                <%- include('../public/left-menu.html') %>
            </div>
            <div class="col-sm-10">
                <form action="/admin/goods/doedit" method="post" enctype="multipart/form-data" class="form-horizontal">
                    <input type="hidden" name="_id" value="<%=dataone._id%>">
                    <input type="hidden" name="prevPage" value="<%=prevPage%>">
                    <div class="form-group">
                        <label for="inputUser" class="col-sm-2 control-label">产品名称:</label>
                        <div class="col-sm-10">
                            <input type="text" class="form-control" id="inputUser" placeholder="请输入产品名称" name="title"
                                value="<%=dataone.title%>">
                        </div>
                    </div>
                    <div class="form-group">
                        <label for="inputsub" class="col-sm-2 control-label">子标题:</label>
                        <div class="col-sm-10">
                            <input type="text" class="form-control" id="inputsub" placeholder="请输入子标题" name="sub_title"
                                value="<%=dataone.sub_title%>">
                        </div>
                    </div>
                    <div class="form-group">
                        <label for="inputcat" class="col-sm-2 control-label">分类名称:</label>
                        <div class="col-sm-10">
                            <select name="cate_id" id="inputcat" class="form-control">
                                <%for(var i = 0; i<goodsCate.length; i++){%>
                                <%if(goodsCate[i]._id.toString()==dataone.cate_id.toString()){%>
                                <option value="<%=goodsCate[i]._id%>" selected="selected"><%=goodsCate[i].title%>
                                </option>
                                <%}else{%>
                                <option value="<%=goodsCate[i]._id%>"><%=goodsCate[i].title%></option>
                                <%}%>
						      	 <%}%>
                            </select>
                        </div>
                    </div>
                    <div class="form-group">
                        <label for="inputnum" class="col-sm-2 control-label">库存:</label>
                        <div class="col-sm-10">
                            <input type="text" class="form-control" id="inputnum" placeholder="请输入库存"
                                name="goods_number" value="<%=dataone.goods_number%>">
                        </div>
                    </div>
                    <div class="form-group">
                        <label for="inputprice" class="col-sm-2 control-label">原价:</label>
                        <div class="col-sm-10">
                            <input type="text" class="form-control" id="inputprice" placeholder="请输入价格"
                                name="shop_price" value="<%=dataone.shop_price%>">
                        </div>
                    </div>
                    <div class="form-group">
                        <label for="inputdis" class="col-sm-2 control-label">打折价</label>
                        <div class="col-sm-10">
                            <input type="text" class="form-control" id="inputdis" placeholder="请输入价格"
                                name="market_price" value="<%=dataone.market_price%>">
                        </div>
                    </div>
                    <div class="form-group">
                        <label for="inputimg" class="col-sm-2 control-label">图像</label> ^_^图像必须上传喔
                        <div class="col-sm-10">
                            <input type="file" class="form-control" id="inputimg" placeholder="请输入图像" name="goods_img"
                                multiple>
                            <div role="tabpanel" class="tab-pane" id="photo" style="height:150px">

                                <div id="goods_image">
                                    <ul id="goods_image_list" class="goods_image_list clear list-inline">

                                        <%for(var i=0;i<goodsImage.length;i++){%>
                                        <li>
                                            <img class="pic" src="/<%=goodsImage[i].img_url%>" width="100" />

                                            <div class="goods_image_delete" goods_image_id="<%=goodsImage[i]._id%>">X</div>
                                        </li>
                                        <%}%>
	                                </ul>
	                              </div>
                                </div>

                    
						    </div>
						</div>
						<div class="form-group">
						    <label for="inputkeyword" class="col-sm-2 control-label">关键字</label>
						    <div class="col-sm-10">
						      <input type="text" class="form-control" id="inputkeyword" placeholder="请输入关键字形如 帽子,儿童帽子,羊毛帽子" name="goods_keywords" value="<%=dataone.goods_keywords%>">
                                </div>
                            </div>
                            <div class="form-group">
                                <label for="inputcontent" class="col-sm-2 control-label">内容</label>
                                <div class="col-sm-10">
                                    <!--<textarea class="form-control" id="inputkeyword" placeholder="请输入内容" name="goods_content"><%=dataone.goods_content%></textarea>-->
                                    <script name="goods_content" id="editor" type="text/plain"
                                        style="width:100%;height:300px;"></script>
                                </div>
                            </div>
                            <div class="form-group">
                                <label for="inputPass" class="col-sm-2 control-label">排序:</label>
                                <div class="col-sm-10">
                                    <input type="text" class="form-control" id="inputPass" placeholder="请输入数字"
                                        name="sort" value="<%=dataone.sort%>">
                                </div>
                            </div>

                            <div class="form-group">
                                <label for="inputPass" class="col-sm-2 control-label">新品,热卖,精品</label>
                                <div class="col-sm-10">
                                    <%if(dataone.is_new==1){%>
                                    <input type="checkbox" name='is_new' value="1" checked>新品
                                    <%}else{%>
                                    <input type="checkbox" name='is_new' value="1">新品
                                    <%}%>
						      <%if(dataone.is_hot==1){%>
                                    <input type="checkbox" name='is_hot' value="1" checked>热卖
                                    <%}else{%>
                                    <input type="checkbox" name='is_hot' value="1">热卖
                                    <%}%>
						       <%if(dataone.is_best==1){%>
                                    <input type="checkbox" name='is_best' value="1" checked>精品
                                    <%}else{%>
                                    <input type="checkbox" name='is_best' value="1">精品
                                    <%}%>
						    </div>
						</div>
	
						<div class="form-group">
						    <div class="col-sm-offset-2 col-sm-10">
						      <button type="submit" class="btn btn-primary">添加</button>
						    </div>
						</div>
					</form>
				
		        </div>
		    </div>
		</div>
		<script>
            var ueditor = UE.getEditor('editor');
            ueditor.addListener("ready", function () { /*注意*/
                // editor 准备好之后才可以使用
                ueditor.setContent(`<%-dataone.goods_content%>`); /*es6的模板字符串*/
            });

            //删除图片
            $('.goods_image_delete').click(function () {
                var _that = this;
                var flag = confirm('您确定要删除吗?');
                if (flag) {
                    var goods_image_id = $(this).attr('goods_image_id');
                    $.post('/admin/goods/goodsImageRemove', { goods_image_id: goods_image_id }, function(response) {
                        console.log(response);
                        if (response.success) {
                            $(_that).parent().remove();
                        }
                    })
                }
            })
        </script>
</body>

</html>